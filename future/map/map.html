<!doctype html>
<html lang="nl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gathering</title>

    <!-- IM Fell English -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">

    <style>
        :root{
            --bg: #000;
            --panel: rgba(0,28,12,.78);
            --stroke: rgba(0,255,102,.22);
            --text: rgba(160,220,170,.95);
            --glow: rgba(120,180,120,.35);
        }

        html, body{
            height:100%;
            margin:0;
            background:var(--bg);
            overflow:hidden;
            color:var(--text);
            font-family:"IM Fell English", serif;
        }

        /* ---------- START SCREEN ---------- */
        .start{
            position:fixed;
            inset:0;
            display:grid;
            place-items:center;
            background:#000;
            z-index:5;
        }

        .startCard{
            padding:26px 28px;
            border-radius:20px;
            border:1px solid var(--stroke);
            background:linear-gradient(180deg, rgba(0,30,14,.85), var(--panel));
            box-shadow:0 20px 70px rgba(0,0,0,.6);
            text-align:center;
        }

        .startCard h1{
            margin:0 0 10px;
            font-size:24px;
            font-style:italic;
            color:var(--text);
            text-shadow:0 0 14px var(--glow);
        }

        .startCard p{
            margin:0 0 18px;
            font-size:14px;
            opacity:.85;
            text-shadow:0 0 10px var(--glow);
        }

        .btn{
            cursor:pointer;
            padding:12px 22px;
            border-radius:14px;
            border:1px solid rgba(0,255,102,.55);
            background:rgba(0,255,102,.14);
            color:var(--text);
            font-family:inherit;
            font-size:16px;
            font-style:italic;
            text-shadow:0 0 10px var(--glow);
        }

        .btn:hover{
            background:rgba(0,255,102,.20);
        }

        /* ---------- MAIN OVERLAY ---------- */
        .overlay{
            position:fixed;
            inset:0;
            display:grid;
            place-items:center;
            background:#000;
            opacity:0;
            pointer-events:none;
            transition:opacity 1600ms ease;
        }

        .overlay.show{
            opacity:1;
            pointer-events:auto;
        }

        .frame{
            width:min(1100px,92vw);
            height:min(700px,92vh);
            border-radius:22px;
            border:1px solid var(--stroke);
            background:rgba(0,0,0,.45);
            box-shadow:
                    0 18px 70px rgba(0,0,0,.6),
                    0 0 40px rgba(0,255,102,.08);
            padding:18px;
            display:grid;
            grid-template-columns:1fr 1.15fr;
            gap:18px;
        }

        .imgWrap{
            height:100%;
            display:flex;
            align-items:center;
            justify-content:center;
            border-radius:16px;
            border:1px solid rgba(0,255,102,.14);
            background:rgba(0,0,0,.25);
            overflow:hidden;
        }

        .imgWrap img{
            height:100%;
            width:auto;
            max-width:100%;
            object-fit:contain;
            filter:drop-shadow(0 0 22px rgba(0,255,102,.10));
        }

        .poem{
            height:100%;
            border-radius:16px;
            border:1px solid rgba(0,255,102,.14);
            background:rgba(0,0,0,.20);
            padding:18px;
            display:flex;
            align-items:center;
            justify-content:center;
            overflow:hidden;
        }

        .poemInner{
            width:100%;
            font-style:italic;
            line-height:1.28;
            letter-spacing:.02em;
            color:var(--text);
            text-shadow:0 0 12px var(--glow);
            font-size:22px; /* JS past dit aan */
        }

        .poemInner p{
            margin:0 0 .9em;
        }
        .poemInner p:last-child{ margin-bottom:0; }

        @media (max-width:900px){
            .frame{
                grid-template-columns:1fr;
                height:min(860px,92vh);
            }
            .imgWrap img{ height:auto; max-height:44vh; }
            .poem{ height:auto; }
        }
    </style>
</head>

<body>

<!-- START -->
<div class="start" id="startScreen">
    <div class="startCard">
        <h1>Een oud lied</h1>
        <p>Klik om het verhaal te laten beginnen.</p>
        <button class="btn" id="startBtn">Start</button>
    </div>
</div>

<!-- MAIN -->
<div class="overlay" id="overlay">
    <div class="frame">
        <div class="imgWrap">
            <img src="image.png" id="mainImg" alt="">
        </div>

        <div class="poem">
            <div class="poemInner" id="poemInner">
                <p>Uit vier windstreken, stil en traag,<br>
                    verlieten zij hun haard bij nacht.<br>
                    Waar lamplicht gloeit en rook opstijgt,<br>
                    werd ieder pad met zorg bedacht.</p>

                <p>Van heuvelhuis en stenen steeg,<br>
                    van bosrand diep en waterkant,<br>
                    vier gezelschappen, oud en nieuw,<br>
                    met lach en lied en lege hand.</p>

                <p>Geen hoorn werd daar ten strijde geblazen,<br>
                    geen zwaard geheven, geen eed gezworen.<br>
                    Maar brood werd gedeeld en verhalen geweven,<br>
                    tot zelfs de tijd zich liet bekoren.</p>

                <p>En op die plaats, waar wegen kruisen,<br>
                    werd het lot voor even mild:<br>
                    geen oorlog, geen schaduw, geen groot gevaar â€”<br>
                    slechts warmte, wijn, en vriendschap stil.</p>
            </div>
        </div>
    </div>
</div>

<audio id="audio" src="sound.mp3" preload="auto"></audio>

<script>
    const startBtn = document.getElementById("startBtn");
    const startScreen = document.getElementById("startScreen");
    const overlay = document.getElementById("overlay");
    const audio = document.getElementById("audio");

    const poemInner = document.getElementById("poemInner");
    const poemBox = poemInner.parentElement;
    const img = document.getElementById("mainImg");

    function fitPoem(){
        let max = 26;
        let min = 12;
        poemInner.style.fontSize = max + "px";

        while (max > min && poemInner.scrollHeight > poemBox.clientHeight){
            max--;
            poemInner.style.fontSize = max + "px";
        }
    }

    startBtn.addEventListener("click", async () => {
        try{
            await audio.play();
        }catch(e){
            console.warn("Audio start geblokkeerd");
        }

        startScreen.style.display = "none";
        overlay.classList.add("show");

        if (!img.complete){
            img.onload = fitPoem;
        } else {
            fitPoem();
        }
        setTimeout(fitPoem, 100);
    });

    window.addEventListener("resize", () => {
        if (overlay.classList.contains("show")) fitPoem();
    });
</script>

</body>
</html>
